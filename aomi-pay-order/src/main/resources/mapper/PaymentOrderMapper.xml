<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.aomi.pay.mapper.PaymentOrderMapper">

    <update id="updateByOrderId" parameterType="com.aomi.pay.entity.PaymentOrder">
        update t_payment_order
        <set>
            <if test="payStatus != null">
                pay_status = #{payStatus},
            </if>
            <if test="completeTime != null">
                complete_time = #{completeTime},
            </if>
            <if test="outTransactionId != null">
                out_transaction_id = #{outTransactionId},
            </if>
        </set>
        where order_id = #{orderId}
    </update>

    <select id="queryListForPage" resultType="com.aomi.pay.entity.PaymentOrder" parameterType="com.aomi.pay.entity.PaymentOrder">
        SELECT
            order_id,
            pay_type,
            amount,
            settle_type,
            complete_time
        FROM
            t_payment_order
        WHERE
            pay_status = 1
            AND merchant_id = #{param.merchantId}
            AND platform_tag = #{param.platformTag}
        ORDER BY
            complete_time DESC
        limit #{start},#{pageSize};
    </select>

</mapper>
